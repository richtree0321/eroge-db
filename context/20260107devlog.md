# 【開発初日】プログラミング未経験がAIペアプロで「最強の個人開発環境」を作った話

## 1. プロジェクトの概要と目的
- **目標**: エロゲ・AVのデータベースサイトを開発し、アフィリエイトで自動収益化システムを構築する。
- **ターゲット**: VNDBやFANZA、DLsiteのデータを統合・分析できるサイト。
- **個人的な裏テーマ**: インフラエンジニア志望のため、単に動けばいいだけでなく、将来的に AWS (EC2/RDS) での運用を見据えた「正統派のLinux開発環境」を習得する。
- **開発スタイル**: GoogleのAIエディタ「Antigravity」を活用し、実践の中でエラーと格闘しながら学ぶ。

---

## 2. なぜ Windows なのに「WSL2」なのか？
最初はWindows上で直接開発しようとしたが、バージョン管理が散らかっていたこともあり、インフラエンジニアとしての視点から **WSL2 (Windows Subsystem for Linux 2)** の導入を決意。

### 導入の技術的理由
1.  **本番環境 (AWS) との統一**:
    Webサーバーのデファクトスタンダードは Linux (Ubuntu等)。Windows特有のパス問題（`\`と`/`の違いなど）やコマンドの違いに悩まされる時間を排除し、最初から本番と同じ Linux 環境で開発すべきと判断。
2.  **Dockerパフォーマンスの最大化**:
    Docker は本来 Linux カーネルの機能を使う技術。Windows上で無理やり動かすよりも、WSL2上で動かすほうがネイティブ動作となり、オーバーヘッドが少なく高速。
3.  **環境の隔離 (Idempotency)**:
    ホストOS（Windows）を汚さず、プロジェクトごとに隔離された環境を作ることで、いつでも環境を作り直せる状態を保つ。

---

## 3. 作業ログ：環境構築編

### Step 1: WSL2 (Ubuntu) のインストール
WindowsのPowerShellにて以下のコマンドを実行。これだけでUbuntu環境が手に入った。

```powershell
wsl --install -d Ubuntu
# -> ユーザー名とパスワードを設定して完了
```

### Step 2: Ubuntuの初期設定
ここからは「Ubuntuの黒い画面」での作業。まずはパッケージリストを最新化し、Pythonとvenvを導入。

```bash
# 儀式（リスト更新）
sudo apt update

# Pythonの管理ツール(pip)と仮想環境作成ツール(venv)のインストール
sudo apt install -y python3-pip python3-venv
```

### Step 3: プロジェクトディレクトリの作成
```bash
# ホームディレクトリにプロジェクト用フォルダ作成
mkdir eroge-db
cd eroge-db
```

### Step 4: AIエディタとの連携
Windows側のエディタから `\\wsl$\Ubuntu\home\ユーザー名\eroge-db` を開くことで、Windows上のGUIで編集しつつ、裏側でLinux上のファイルを操作する構成を確立。

---

## 4. トラブルシューティング：Python環境構築の洗礼 (PEP 668)

早速ライブラリを入れようとしたところでエラー発生。

### 実行したコマンド
```bash
pip install requests
```

### 発生したエラー
```text
error: externally-managed-environment
...
This environment is externally managed
To install Python packages system-wide, try apt install ...
```

### 原因：PEP 668 とは？
AIに解説を求めたところ、これは**「OS（システム）が使うPython環境を、ユーザーが勝手に汚さないための保護機能」**だった。
UbuntuなどのLinuxディストリビューションは、OSのシステムツール自体がPythonで動いていることが多い。そのため、ユーザーが `pip install` でライブラリのバージョンを勝手に書き換えると、OSの機能が壊れるリスクがある。
近年のLinuxでは、これを防ぐためにシステム領域への直接インストール (`Global Install`) がブロックされている。

### 解決策：仮想環境 (venv) の徹底
インフラエンジニアの作法として、**「プロジェクトごとに仮想環境 (venv) を切る」** のが正解。

```bash
# 1. 仮想環境を作成（.venvという隔離された箱を作る）
python3 -m venv .venv

# 2. 仮想環境を有効化（箱の中に入る）
source .venv/bin/activate

# 3. 箱の中でインストール（これならエラーにならない）
pip install requests
```

**学び**: プロンプトに `(.venv)` と表示されている状態を作るのが、LinuxでのPython開発の基本ルール。

---

## 5. 実装：VNDB API を叩く

環境が整ったので、実際にデータを取得するコードを作成。

### AIへの指示 (プロンプト)
> 「VNDB (Visual Novel Database)」の公開APIを使用して、
> キーワード「Fate/stay night」でゲームを検索し、
> タイトル・発売日・評価スコアを取得して表示するPythonコードを書いてください。
> ライブラリは `requests` を使用し、エラーハンドリングも含めてください。

### 作成されたファイル (`vndb_test.py`) を実行
```bash
# 必ず仮想環境に入った状態で実行
python3 vndb_test.py
```

### 結果
ターミナルに以下が表示され、データ取得成功！
```text
タイトル: Fate/stay night
発売日  : 2004-01-30
評価    : 86.2
```

---

## 6. 今後の展望
- **Docker Compose の導入**:
  現在はPythonスクリプトを動かすだけだが、次は DB (PostgreSQL) を Docker で立ち上げ、取得したデータを永続化（保存）するフェーズに進む。
- **Web表示**:
  Next.js を導入し、ターミナルの文字情報ではなく、ブラウザで見れる「Webサイト」の形にする。